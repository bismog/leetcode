#!/usr/bin/env python
#-*- coding:utf-8 -*-

# http://stackoverflow.com/questions/956867/how-to-get-string-objects-instead-of-unicode-ones-from-json-in-python
# http://stackoverflow.com/questions/27140090/how-can-json-data-with-null-value-be-converted-to-a-dictionary

import json
import ast

def byteify(input):
    if isinstance(input, dict):
        return {byteify(key): byteify(value)
                for key, value in input.iteritems()}
    elif isinstance(input, list):
        return [byteify(element) for element in input]
    elif isinstance(input, unicode):
        return input.encode('utf-8')
    else:
        return input


data = {u'name': u'providerha_tmp', u'deleted': False, u'created_at': u'2017-04-12T08:21:14.000000', u'updated_at': u'2017-04-12T08:21:14.000000', u'content': u'{"roles": [{"db_vip": "192.168.1.3", "config_set_id": "8e26b4fd-c6fd-4876-85a6-13fdb48cff09", "deployment_backend": "tecs", "name": "CONTROLLER_HA", "outband_vip": "10.43.177.209", "docker_vg_size": 104448, "description": "Controller role,backup type is HA,active/standby", "mongodb_vip": null, "public_vip": "10.43.177.206", "glance_lv_size": 51200, "vip": "192.168.1.1", "role_type": "CONTROLLER_HA", "db_lv_size": 0, "tecsclient_vip": "10.43.177.209", "provider_mgnt_vip": "192.168.1.4", "ntp_server": "", "disk_location": "local", "type": "default", "nova_lv_size": 0, "glance_vip": "192.168.1.2", "provider_public_vip": "10.43.177.209"}, {"db_vip": null, "config_set_id": "62946592-7ea3-4b7f-b756-795b75b99c11", "deployment_backend": "tecs", "name": "CONTROLLER_LB", "outband_vip": null, "docker_vg_size": 0, "description": "Controller role,backup type is loadbalance", "mongodb_vip": null, "public_vip": null, "glance_lv_size": 0, "vip": "192.168.1.5", "role_type": "CONTROLLER_LB", "db_lv_size": 0, "tecsclient_vip": null, "provider_mgnt_vip": null, "ntp_server": null, "disk_location": "local", "type": "default", "nova_lv_size": 0, "glance_vip": null, "provider_public_vip": null}, {"db_vip": null, "config_set_id": "ff3a5c33-c67d-411a-89f4-d068c51aceee", "deployment_backend": "tecs", "name": "COMPUTER", "outband_vip": null, "docker_vg_size": 0, "description": "Compute role", "mongodb_vip": null, "public_vip": null, "glance_lv_size": 0, "vip": null, "role_type": "COMPUTER", "db_lv_size": 0, "tecsclient_vip": null, "provider_mgnt_vip": null, "ntp_server": null, "disk_location": "local", "type": "default", "nova_lv_size": -1, "glance_vip": null, "provider_public_vip": null}], "neutron_backends": [], "services_disk": [{"service": "provider", "data_ips": null, "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": 20480}, {"service": "mongodb", "data_ips": "", "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": 0}, {"service": "glance", "data_ips": "", "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": -1}, {"service": "db", "data_ips": "", "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": -1}, {"service": "db_backup", "data_ips": "", "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": 0}], "cluster_name": "provider_ha", "cluster": {"description": "", "routers": [], "hwm_ip": "10.43.177.209", "owner": null, "logic_networks": [], "networking_parameters": {"vni_range": [null, null], "public_vip": "10.43.177.206", "net_l23_provider": null, "base_mac": "", "gre_id_range": [null, null], "vlan_range": [null, null], "segmentation_type": null}, "auto_scale": 0, "use_dns": 1, "target_systems": "os+tecs", "use_provider_ha": 1, "tecs_version_id": ""}, "cinder_volumes": [], "optical_switchs": [], "component_configs": [{"enable": 0, "name": "swift"}, {"enable": 0, "name": "barbican"}, {"enable": 0, "name": "logstash"}], "networks": [{"ip": null, "gre_id_start": null, "gateway": "10.43.177.1", "vlan_id": null, "vni_id": null, "physnet_name": "physnet_enp129s0f1", "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": "10.43.177.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "OUTBAND", "custom_name": "", "ip_ranges": [{"start": "10.43.177.201", "cidr": "None", "end": "10.43.177.240", "gateway": "None"}], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "OUTBAND"}, {"ip": null, "gre_id_start": null, "gateway": null, "vlan_id": null, "vni_id": null, "physnet_name": null, "gre_id_end": null, "ml2_type": "ovs", "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": null, "vdp_vlan_id": null, "svlan_start": 3000, "name": "physnet1", "custom_name": "", "ip_ranges": [], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": "vlan", "network_type": "DATAPLANE"}, {"ip": null, "gre_id_start": null, "gateway": null, "vlan_id": null, "vni_id": null, "physnet_name": null, "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "Storage network plane", "netmask": null, "vlan_start": 1, "cidr": "1.0.0.0/8", "vdp_vlan_id": null, "svlan_start": 3000, "name": "STORAGE", "custom_name": null, "ip_ranges": [], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "STORAGE"}, {"ip": null, "gre_id_start": null, "gateway": "10.43.177.1", "vlan_id": null, "vni_id": null, "physnet_name": "physnet_enp129s0f1", "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": "10.43.177.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "PUBLICAPI", "custom_name": "", "ip_ranges": [{"start": "10.43.177.201", "cidr": "None", "end": "10.43.177.240", "gateway": "None"}], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "PUBLICAPI"}, {"ip": null, "gre_id_start": null, "gateway": "", "vlan_id": null, "vni_id": null, "physnet_name": "physnet_enp129s0f0", "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": "192.168.1.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "MANAGEMENT", "custom_name": "", "ip_ranges": [{"start": "192.168.1.201", "cidr": "None", "end": "192.168.1.250", "gateway": "None"}], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "MANAGEMENT"}, {"ip": null, "gre_id_start": null, "gateway": "10.43.177.1", "vlan_id": null, "vni_id": null, "physnet_name": "physnet_enp129s0f1", "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": "10.43.177.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "TECSClient", "custom_name": "", "ip_ranges": [{"start": "10.43.177.201", "cidr": "None", "end": "10.43.177.240", "gateway": "None"}], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "TECSClient"}, {"ip": null, "gre_id_start": null, "gateway": null, "vlan_id": null, "vni_id": null, "physnet_name": null, "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "For external interactive", "netmask": null, "vlan_start": 1, "cidr": "1.0.0.0/8", "vdp_vlan_id": null, "svlan_start": 3000, "name": "EXTERNAL", "custom_name": null, "ip_ranges": [], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "EXTERNAL"}, {"ip": null, "gre_id_start": null, "gateway": null, "vlan_id": null, "vni_id": null, "physnet_name": null, "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "For deploy the infrastructure", "netmask": null, "vlan_start": 1, "cidr": "99.99.1.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "DEPLOYMENT", "custom_name": null, "ip_ranges": [], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "DEPLOYMENT"}]}', u'version': u'38', u'hosts': u'[]', u'deleted_at': None, u'type': u'tecs', u'id': u'e5192290-69d1-4373-a8c2-f7a695511479', u'description': None}

# do = ast.literal_eval(data)
# print do

# output of byteify is a object(for example, a dictionary)
doo = byteify(data)
# doox = json.loads(json.dumps(str(doo)))
doox = json.loads(json.dumps(doo))
print doox
# doo_dumped = json.dumps(doo)
# doo_loaded = json.loads(doo_dumped)
# print doo_loaded
## if isinstance(doo, str):
##     print 'doo is a string'
## if isinstance(doo, dict):
##     print 'doo is a dictionary'
## print doo

# doo = json.loads(data)
# print doo

{u'name': u'providerha_tmp', u'deleted': False, u'created_at': u'2017-04-12T08:21:14.000000', u'updated_at': u'2017-04-12T08:21:14.000000', u'content': u'{"roles": [{"db_vip": "192.168.1.3", "config_set_id": "8e26b4fd-c6fd-4876-85a6-13fdb48cff09", "deployment_backend": "tecs", "name": "CONTROLLER_HA", "outband_vip": "10.43.177.209", "docker_vg_size": 104448, "description": "Controller role,backup type is HA,active/standby", "mongodb_vip": null, "public_vip": "10.43.177.206", "glance_lv_size": 51200, "vip": "192.168.1.1", "role_type": "CONTROLLER_HA", "db_lv_size": 0, "tecsclient_vip": "10.43.177.209", "provider_mgnt_vip": "192.168.1.4", "ntp_server": "", "disk_location": "local", "type": "default", "nova_lv_size": 0, "glance_vip": "192.168.1.2", "provider_public_vip": "10.43.177.209"}, {"db_vip": null, "config_set_id": "62946592-7ea3-4b7f-b756-795b75b99c11", "deployment_backend": "tecs", "name": "CONTROLLER_LB", "outband_vip": null, "docker_vg_size": 0, "description": "Controller role,backup type is loadbalance", "mongodb_vip": null, "public_vip": null, "glance_lv_size": 0, "vip": "192.168.1.5", "role_type": "CONTROLLER_LB", "db_lv_size": 0, "tecsclient_vip": null, "provider_mgnt_vip": null, "ntp_server": null, "disk_location": "local", "type": "default", "nova_lv_size": 0, "glance_vip": null, "provider_public_vip": null}, {"db_vip": null, "config_set_id": "ff3a5c33-c67d-411a-89f4-d068c51aceee", "deployment_backend": "tecs", "name": "COMPUTER", "outband_vip": null, "docker_vg_size": 0, "description": "Compute role", "mongodb_vip": null, "public_vip": null, "glance_lv_size": 0, "vip": null, "role_type": "COMPUTER", "db_lv_size": 0, "tecsclient_vip": null, "provider_mgnt_vip": null, "ntp_server": null, "disk_location": "local", "type": "default", "nova_lv_size": -1, "glance_vip": null, "provider_public_vip": null}], "neutron_backends": [], "services_disk": [{"service": "provider", "data_ips": null, "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": 20480}, {"service": "mongodb", "data_ips": "", "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": 0}, {"service": "glance", "data_ips": "", "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": -1}, {"service": "db", "data_ips": "", "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": -1}, {"service": "db_backup", "data_ips": "", "role_id": "CONTROLLER_HA", "disk_location": "local", "protocol_type": "ISCSI", "lun": 0, "size": 0}], "cluster_name": "provider_ha", "cluster": {"description": "", "routers": [], "hwm_ip": "10.43.177.209", "owner": null, "logic_networks": [], "networking_parameters": {"vni_range": [null, null], "public_vip": "10.43.177.206", "net_l23_provider": null, "base_mac": "", "gre_id_range": [null, null], "vlan_range": [null, null], "segmentation_type": null}, "auto_scale": 0, "use_dns": 1, "target_systems": "os+tecs", "use_provider_ha": 1, "tecs_version_id": ""}, "cinder_volumes": [], "optical_switchs": [], "component_configs": [{"enable": 0, "name": "swift"}, {"enable": 0, "name": "barbican"}, {"enable": 0, "name": "logstash"}], "networks": [{"ip": null, "gre_id_start": null, "gateway": "10.43.177.1", "vlan_id": null, "vni_id": null, "physnet_name": "physnet_enp129s0f1", "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": "10.43.177.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "OUTBAND", "custom_name": "", "ip_ranges": [{"start": "10.43.177.201", "cidr": "None", "end": "10.43.177.240", "gateway": "None"}], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "OUTBAND"}, {"ip": null, "gre_id_start": null, "gateway": null, "vlan_id": null, "vni_id": null, "physnet_name": null, "gre_id_end": null, "ml2_type": "ovs", "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": null, "vdp_vlan_id": null, "svlan_start": 3000, "name": "physnet1", "custom_name": "", "ip_ranges": [], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": "vlan", "network_type": "DATAPLANE"}, {"ip": null, "gre_id_start": null, "gateway": null, "vlan_id": null, "vni_id": null, "physnet_name": null, "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "Storage network plane", "netmask": null, "vlan_start": 1, "cidr": "1.0.0.0/8", "vdp_vlan_id": null, "svlan_start": 3000, "name": "STORAGE", "custom_name": null, "ip_ranges": [], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "STORAGE"}, {"ip": null, "gre_id_start": null, "gateway": "10.43.177.1", "vlan_id": null, "vni_id": null, "physnet_name": "physnet_enp129s0f1", "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": "10.43.177.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "PUBLICAPI", "custom_name": "", "ip_ranges": [{"start": "10.43.177.201", "cidr": "None", "end": "10.43.177.240", "gateway": "None"}], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "PUBLICAPI"}, {"ip": null, "gre_id_start": null, "gateway": "", "vlan_id": null, "vni_id": null, "physnet_name": "physnet_enp129s0f0", "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": "192.168.1.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "MANAGEMENT", "custom_name": "", "ip_ranges": [{"start": "192.168.1.201", "cidr": "None", "end": "192.168.1.250", "gateway": "None"}], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "MANAGEMENT"}, {"ip": null, "gre_id_start": null, "gateway": "10.43.177.1", "vlan_id": null, "vni_id": null, "physnet_name": "physnet_enp129s0f1", "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "", "netmask": null, "vlan_start": 1, "cidr": "10.43.177.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "TECSClient", "custom_name": "", "ip_ranges": [{"start": "10.43.177.201", "cidr": "None", "end": "10.43.177.240", "gateway": "None"}], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "TECSClient"}, {"ip": null, "gre_id_start": null, "gateway": null, "vlan_id": null, "vni_id": null, "physnet_name": null, "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "For external interactive", "netmask": null, "vlan_start": 1, "cidr": "1.0.0.0/8", "vdp_vlan_id": null, "svlan_start": 3000, "name": "EXTERNAL", "custom_name": null, "ip_ranges": [], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "EXTERNAL"}, {"ip": null, "gre_id_start": null, "gateway": null, "vlan_id": null, "vni_id": null, "physnet_name": null, "gre_id_end": null, "ml2_type": null, "vlan_end": 4094, "vni_end": null, "type": "default", "description": "For deploy the infrastructure", "netmask": null, "vlan_start": 1, "cidr": "99.99.1.1/24", "vdp_vlan_id": null, "svlan_start": 3000, "name": "DEPLOYMENT", "custom_name": null, "ip_ranges": [], "mtu": 1500, "capability": "high", "alias": null, "vni_start": null, "svlan_end": 4094, "segmentation_type": null, "network_type": "DEPLOYMENT"}]}', u'version': u'38', u'hosts': u'[]', u'deleted_at': None, u'type': u'tecs', u'id': u'e5192290-69d1-4373-a8c2-f7a695511479', u'description': None}


data0 = {'job': {"city":"nanjing", "time": "night"}, 'age': 39, 'name': 'Jones'}
print json.loads(json.dumps(data0))
